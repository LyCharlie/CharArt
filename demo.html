<html>

<head>
    <script src="./index.js"></script>
</head>

<body>
    <div style="display: flex; flex-direction: column">
        <div>
            <input type="file" id="img_input" onchange="selectImg(this)" />
            <button id="transform" onclick="transform()">transform</button>
        </div>
        <div style="margin: 50;display: flex;">
            <div>
                <img id="result" src=""/>
            </div>
            <pre id="imgCharacter" style="font-size: 6px;"></pre>
        </div>
    </div>

    <script>
        let input = document.getElementById('img_input');
        let result = document.getElementById('result');
        let inputFile;
        function selectImg(file) {
            let reader = new FileReader();
            reader.onload = function (evt) {
                result.src = evt.target.result;
                inputFile = evt.target.result;
            }
            reader.readAsDataURL(file.files[0]);
        }

        function transform() {
            const result = getImgData(inputFile, 150);
            let data = '';
            for (let i = 0; i < result.length; i++) {
                for (let j = 0; j < result[i].length; j++) {
                    data += result[i][j] + '';
                }
                data += '\n'
            }
            console.log(data);
            const p = document.getElementById('imgCharacter');
            p.innerText = data;
        }
    </script>
</body>

</html>